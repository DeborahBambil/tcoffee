

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>T-Coffee doc test &mdash; T-Coffee 11 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="FAQ" href="tcoffee_faq.html" />
    <link rel="prev" title="T-Coffee Web Server" href="tcoffee_webserver.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> T-Coffee
          

          
          </a>

          
            
            
              <div class="version">
                11
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tcoffee_installation.html">T-Coffee Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcoffee_quickstart_regressive.html">Quick Start Regressive Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcoffee_quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcoffee_main_documentation.html">T-Coffee Main Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcoffee_technical_documentation.html">T-Coffee Technical Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcoffee_webserver.html">T-Coffee Web Server</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">T-Coffee doc test</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#introducing-a-new-command-to-test">Introducing a new command to test</a></li>
<li class="toctree-l2"><a class="reference internal" href="#checking-the-documentation">Checking the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compiling-the-documentation">Compiling the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#validating-a-distribution">Validating a distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-new-command">Creating a new command</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tcoffee_faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcoffee_citations_references.html">Citations &amp; References</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcoffee_contacts_adresses.html">Contacts, Adresses &amp; Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcoffee_license.html">License &amp; Terms of Use</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">T-Coffee</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>T-Coffee doc test</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tcoffee_doctest.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="t-coffee-doc-test">
<h1>T-Coffee doc test<a class="headerlink" href="#t-coffee-doc-test" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Before the realease of a new T-Coffee version, many command lines in the documentation are programmatically tested. The purpose of this document is to explain which command lines are tested, how new command lines can be added to the documentation and how to perform a documentation check before a new release.</p>
</div>
<div class="section" id="introducing-a-new-command-to-test">
<h2>Introducing a new command to test<a class="headerlink" href="#introducing-a-new-command-to-test" title="Permalink to this headline">¶</a></h2>
<p>Tests are systematically carried out on all the command lines that start with the symbol $$. For instance, the following CL will has been tested.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$$: t_coffee
</pre></div>
</div>
<p>Other command lines starting with different symbols are not checked. Two types of command lines identifiers are used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$#: t_coffee
</pre></div>
</div>
<p>For a command that could be tested but will not be, either for the sake of time or because it is currently unstable. When a new release needs to be urgently made available because of a critical fix, it is advisable to comment out this way non critical command lines failing the test.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##: t_coffee</span>
</pre></div>
</div>
<p>These commands are never tested, either because they contain system dependant information or non programmatic information.</p>
<p>Whenvever adding a new command, input files must be added to the repository directory ./examples/. New commands can be also be built using the existing files, or they can depend on files newly added to the repository.</p>
</div>
<div class="section" id="checking-the-documentation">
<h2>Checking the documentation<a class="headerlink" href="#checking-the-documentation" title="Permalink to this headline">¶</a></h2>
<p>The simplest way to check the documentation is to run the following command from the repository root (other locations are possible, but -ref, -docs must be modified accordingly):</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##: ./lib/perl/lib/perl4makefile/doc2test.pl -mode update</span>
</pre></div>
</div>
</div></blockquote>
<p>This script will extract all tcommand lines from the .rst in docs and will run these command lines. When a reference output is available in /testsuite/docs/ref/ it will produce an other output and compare it with the reference. The new output will be put in /testsuite/docs/latest/. The script will eventually produce a global report that is to be found in /testsuite/docs/log/validation.log. The output of the failed scripts will be put in /testsuite/docs/failed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##: ./lib/perl/lib/perl4makefile/doc2test.pl -mode new</span>
</pre></div>
</div>
<p>This mode will only run the new command lines and report (defined as those not having a reference output in /testsuite/docs/ref/). This mode is the default mode</p>
<dl class="simple">
<dt>::</dt><dd><p>##: ./lib/perl/lib/perl4makefile/doc2test.pl -mode failed</p>
</dd>
</dl>
<p>This mode will only run the command lines that have previously failed, as indicated by the presence of an output in the failed directory.</p>
</div>
<div class="section" id="compiling-the-documentation">
<h2>Compiling the documentation<a class="headerlink" href="#compiling-the-documentation" title="Permalink to this headline">¶</a></h2>
<p>The documentation can be compiled using the following command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##: ./lib/perl/lib/perl4makefile/doc2test.pl -mode update -stop</span>
</pre></div>
</div>
<p>It will cause the test to stop whenever a failed is encountered</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##: ./lib/perl/lib/perl4makefile/doc2test.pl -mode reset</span>
</pre></div>
</div>
<p>Will cause all the reference files to be erased.</p>
</div>
<div class="section" id="validating-a-distribution">
<h2>Validating a distribution<a class="headerlink" href="#validating-a-distribution" title="Permalink to this headline">¶</a></h2>
<p>Dump files are safe contained. It is possible to check T-Coffee capacity to reproduce a collection of reference dump files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##: ./lib/perl/lib/perl4makefile/doc2test.pl -mode check -ref &lt;dir containing dump files&gt;</span>
</pre></div>
</div>
<p>It will cause the test to stop whenever a failed is encountered</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##: ./lib/perl/lib/perl4makefile/doc2test.pl -mode reset</span>
</pre></div>
</div>
<p>Will cause all the reference files to be erased.</p>
</div>
<div class="section" id="creating-a-new-command">
<h2>Creating a new command<a class="headerlink" href="#creating-a-new-command" title="Permalink to this headline">¶</a></h2>
<p>In order to generate a new test command, all you need to do is to run your command while setting an environement variable. This will generate a dump file that can be used to rerun the same call:
Dump files are very easy to produce yout simply need to run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##:rm -f &lt;your dump file&gt;;export DUMP_4_TCOFFEE=&lt;your dump file&gt;;t_coffee -in seq</span>
<span class="n">OR</span>
<span class="c1">##:rm -f &lt;your dump file&gt;;export DUMP_4_TCOFFEE=&lt;your dump file&gt;;t_coffee -other_pg seq_reformat -in xxxx/xx/s.pep -output fasta_seq &gt; yyy</span>
</pre></div>
</div>
<p>This command will generate a self contained dumpfile. This dumpfile will contain all the information needed ton reprodduce the runn (i.e file name, path, content and T-Coffee parameters). In order to reproduce the call you need to have T-Coffee installed and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">##: ./lib/perl/lib/perl4makefile/doc2test.pl -replay yourdumpfile</span>
</pre></div>
</div>
<p>Will allow you to check if the command runs and produces similar files. By default the test is “PASSED” if no error is thrown by the call. This can be refined as follows:</p>
<blockquote>
<div><p>##: ./lib/perl/lib/perl4makefile/doc2test.pl -replay yourdumpfile -strict</p>
</div></blockquote>
<p>Will report failure whenever an output file is missing or whenever an error is reported.</p>
<blockquote>
<div><p>##: ./lib/perl/lib/perl4makefile/doc2test.pl -replay yourdumpfile -very_strict</p>
</div></blockquote>
<p>Will report failure whenever there is a warning OR whenever an output file differs (Note that VERSION and CPU are excluded from the comparison as a consequence different versions will not result in different output files). It is possible to visualize the replayed dump for debugging purposes.</p>
<blockquote>
<div><p>##: ./lib/perl/lib/perl4makefile/doc2test.pl -replay yourdumpfile -keepreplayed</p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tcoffee_faq.html" class="btn btn-neutral float-right" title="FAQ" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tcoffee_webserver.html" class="btn btn-neutral float-left" title="T-Coffee Web Server" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Cedric Notredame

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>